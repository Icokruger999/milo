{
    "Parameters": {
        "commands": [
        "cd /home/ec2-user/milo",
        "echo 'Pulling latest code...'",
        "sudo -u ec2-user git pull origin main",
        "cd /home/ec2-user/milo/backend/Milo.API",
        "echo 'Building backend...'",
        "sudo -u ec2-user dotnet build --configuration Release",
        "echo 'Stopping backend service...'",
        "sudo systemctl stop milo-backend",
        "echo 'Publishing backend...'",
        "sudo -u ec2-user dotnet publish -c Release -o /home/ec2-user/milo-backend-publish",
        "echo 'Starting backend service...'",
        "sudo systemctl start milo-backend",
        "sleep 5",
        "echo 'Checking service status...'",
        "sudo systemctl status milo-backend --no-pager",
        "echo 'Backend deployment complete'"
        ]
    }
}
